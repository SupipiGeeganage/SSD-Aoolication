<!DOCTYPE html>
<html lang="en">
<head>
	<title>Login V17</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon.ico"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
<!--===============================================================================================-->	
	<link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<!--===============================================================================================-->
	<style media="screen">
		#profile,loutbtn{
			display:none;
		}
		
		.imgcontainer {
		text-align: center;
		margin: 24px 0 12px 0;
		}

		img.avatar {
		width: 20%;
		border-radius: 50%;
		}

		img.avatar2 {
		width: 10%;
		border-radius: 50%;
		}

		.container {
		padding: 16px;
		}
		
		#note{
		margin-left:46.5%;
		}

		#input1{
		margin-left:41.5%;
		}
		
		#input2{
		margin-left:46.5%;
		}
	</style>
</head>
<body>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '2354144028039071',
      cookie     : true,
      xfbml      : true,
      version    : 'v4.0'
    });
      
    FB.getLoginStatus(function(response) {
		statusChangeCallback(response);
	}); 
      
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));
   
   function statusChangeCallback(response){
	if(response.status === 'connected'){
			console.log('Logged in and authenticated');
			setElements(true);
			testAPI();
		}
	else{
		console.log('Not authenticated')
		setElements(false);
	}
   }
   
   function checkLoginState() {
		FB.getLoginStatus(function(response) {
			statusChangeCallback(response);
		});
	}
	
	function testAPI(){
		FB.api('/me?fields=name,email,picture.width(200).height(200)',function(response){
			if(response && !response.error){
				console.log(response);
				buildProfile(response);
			}
		})
	}
	
	function buildProfile(user){
		let profile = `
		<div class="imgcontainer" id="imgppic">
			<img src=${user.picture.data.url} alt="Avatar" class="avatar2" id="ppic">
			</div>
			<div>
				<h4 id="note">Hi</h4>
				<h2 id="input1"><b>${user.name}</b></h2>
							
				
			</div>
		`;
		
		document.getElementById('profile').innerHTML = profile;
	}
	 function logout() {
		FB.logout(function(response) {
			setElements(false);
		});
	}

	function setElements(isLoggedIn) {
		if(isLoggedIn){
			document.getElementById('profile').style.display='block';
			document.getElementById('loutbtn').style.display='block';
			document.getElementById('fb-btn').style.display='none';
			document.getElementById('heading').style.display='none';
			document.getElementById('imgppic').style.display='none';
		}
		else{
			document.getElementById('profile').style.display='none';
			document.getElementById('loutbtn').style.display='none';
			document.getElementById('fb-btn').style.display='block';
			document.getElementById('heading').style.display='block';
			document.getElementById('imgppic').style.display='block';
		
		}
	}
	
	

</script>



	<div class="container-login100-form-btn m-t-20" id="loutbtn">
						<button onclick="logout()" class="btn btn-primary" id="loutbtn">
							Logout
						</button>
	</div>
	<div class="limiter">
	<div class="imgcontainer" id="imgppic">
		
	</div>
	</div>
	<div class="limiter" id="heading">
		<div class="container-login100">
			<div class="wrap-login100">
				<form class="login100-form validate-form">
					<span class="login100-form-title p-b-34">
						Secure Software Development Login
					</span>
					
					<div class="wrap-input100 rs1-wrap-input100 validate-input m-b-20" data-validate="Type user name">
						<input id="first-name" class="input100" type="text" name="username" placeholder="User name">
						<span class="focus-input100"></span>
					</div>
					<div class="wrap-input100 rs2-wrap-input100 validate-input m-b-20" data-validate="Type password">
						<input class="input100" type="password" name="pass" placeholder="Password">
						<span class="focus-input100"></span>
					</div>
					
					<div class="container-login100-form-btn">
						<button class="login100-form-btn">
							Sign in
						</button>
					</div>

					
					
					<div class="w-full text-center p-t-27 p-b-239">
					<fb:login-button
							id="fb-btn"
							size="xlarge"
							scope="public_profile,email"
							onlogin="checkLoginState();">
						</fb:login-button>
					</div>
					
					
				</form>

				<div class="login100-more" style="background-image: url('images/bg-01.jpg');"></div>
			</div>
		</div>
	</div>
	
	
	<div id="profile">
	
	</div>
	
	

	<div id="dropDownSelect1"></div>
	

</body>
</html>
